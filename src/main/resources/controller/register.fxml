<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Hyperlink?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.ScrollPane?>

<BorderPane xmlns="http://javafx.com/javafx/8"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="controller.RegisterController"
            stylesheets="@/css/StylesUser.css">

    <!-- LEFT: Registration Form -->
    <left>
        <VBox alignment="CENTER" spacing="20" BorderPane.alignment="CENTER" styleClass="dashboard-vbox">
            <padding>
                <Insets top="30" right="30" bottom="30" left="30"/>
            </padding>
            <ScrollPane fitToWidth="true" minHeight="450" maxHeight="600" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
                <padding>
                    <Insets top="10" right="10" bottom="10" left="10"/>
                </padding>
                <content>
                    <VBox alignment="CENTER" spacing="15">
                        <padding>
                            <Insets top="10" right="10" bottom="20" left="10"/>
                        </padding>
                        <Label text="Register" styleClass="dashboard-label"/>
                        
                        <!-- Error message label -->
                        <Label fx:id="errorMessageLabel" styleClass="error-label" visible="false" 
                               textFill="RED" wrapText="true" maxWidth="300" alignment="CENTER"/>

    <GridPane hgap="15" vgap="15" alignment="CENTER">

        <Label text="First Name:" GridPane.columnIndex="0" GridPane.rowIndex="0" styleClass="label"/>
        <TextField fx:id="firstNameField" GridPane.columnIndex="1" GridPane.rowIndex="0" styleClass="text-field"/>

        <Label text="Last Name:" GridPane.columnIndex="0" GridPane.rowIndex="1" styleClass="label"/>
        <TextField fx:id="lastNameField" GridPane.columnIndex="1" GridPane.rowIndex="1" styleClass="text-field"/>

        <Label text="Email:" GridPane.columnIndex="0" GridPane.rowIndex="2" styleClass="label"/>
        <TextField fx:id="emailField" GridPane.columnIndex="1" GridPane.rowIndex="2" styleClass="text-field"/>

        <Label text="Password:" GridPane.columnIndex="0" GridPane.rowIndex="3" styleClass="label"/>
        <PasswordField fx:id="passwordField" GridPane.columnIndex="1" GridPane.rowIndex="3" styleClass="password-field"/>

        <Label text="Profile Image:" GridPane.columnIndex="0" GridPane.rowIndex="4" styleClass="label"/>
        <Button text="Choose Image" onAction="#handleImageUpload" GridPane.columnIndex="1" GridPane.rowIndex="4" 
                styleClass="dashboard-button" prefWidth="150"/>

        <ImageView fx:id="profileImageView" fitHeight="100" fitWidth="100"
                   GridPane.columnIndex="1" GridPane.rowIndex="5" styleClass="image-view"/>

        <Label fx:id="selectedImageLabel" text="No image selected"
               GridPane.columnIndex="1" GridPane.rowIndex="6" styleClass="label"/>

        <Button text="Register" onAction="#handleRegister"
                GridPane.columnIndex="1" GridPane.rowIndex="7"
                styleClass="dashboard-button" prefWidth="150"/>

        <Separator GridPane.columnIndex="0" GridPane.rowIndex="8" GridPane.columnSpan="2" GridPane.hgrow="ALWAYS">
            <GridPane.margin>
                <Insets top="15" bottom="15"/>
            </GridPane.margin>
        </Separator>

        <Button text="Sign up with Google" onAction="#handleGoogleSignUp"
                GridPane.columnIndex="1" GridPane.rowIndex="9"
                styleClass="google-button" prefWidth="150"/>

        <Button fx:id="facebookRegisterBtn" text="Register with Facebook" onAction="#handleFacebookSignUp"
                GridPane.columnIndex="1" GridPane.rowIndex="10"
                styleClass="facebook-button" prefWidth="150"/>

        <Hyperlink text="Back to Login" onAction="#goToLogin"
                   GridPane.columnIndex="1" GridPane.rowIndex="11"
                   styleClass="hyperlink"/>

        <!-- Camera view in its own section -->
        <Separator GridPane.columnIndex="0" GridPane.rowIndex="12" GridPane.columnSpan="2" GridPane.hgrow="ALWAYS">
            <GridPane.margin>
                <Insets top="15" bottom="15"/>
            </GridPane.margin>
        </Separator>

        <Label text="Face Registration:" GridPane.columnIndex="0" GridPane.rowIndex="13" styleClass="label">
            <GridPane.margin>
                <Insets top="5" />
            </GridPane.margin>
        </Label>
        
        <ImageView fx:id="cameraView" fitWidth="300" fitHeight="200" preserveRatio="true"
                   GridPane.columnIndex="1" GridPane.rowIndex="14" GridPane.rowSpan="2">
            <GridPane.margin>
                <Insets top="5" bottom="15" />
            </GridPane.margin>
        </ImageView>
        
        <Button text="Capture Image"
                GridPane.columnIndex="1" GridPane.rowIndex="16"
                styleClass="dashboard-button" prefWidth="150"/>

        <Label fx:id="cameraStatusLabel" text="" 
               GridPane.columnIndex="1" GridPane.rowIndex="17" 
               styleClass="label" textFill="#444444"/>
    </GridPane>
                    </VBox>
                </content>
            </ScrollPane>
        </VBox>
    </left>

    <!-- RIGHT: Image -->
    <right>
        <StackPane alignment="CENTER" BorderPane.alignment="CENTER">
            <ImageView fitWidth="400" preserveRatio="true">
                <image>
                    <Image url="@/img/FARMER.png" />
                </image>
            </ImageView>
        </StackPane>
    </right>

</BorderPane>
